Okay this is the basic file and  equation structure that rimworld uses for bullet damage


OKAY I LOOKED AT IT AND THERE IS NO RANDOMIZING OF DAMAGE OTHER THAN WITH ARMOR:
I could not find anything in the source code that looked like it randomized the original projectile,
and when testing damage, naked people take the same damage from weapons every single time, so the only
randomized damage is in the armor section in applyarmor(), which is kinda crazy that I didnt notice that with how many hours I have in the game,
also body part a bullet hits is randomized too, its randomized in impact somewhere but I didnt right it down because I thought it wasnt important

the bullet is a projectile created by the trycastshot func, in verb_laynchProjectile
bullet is updates itself every tick, and this is where impact and all damage and stuff is applied, although on creation the bullet obviously
is assigned information from the gun that shoots the bullet
below is how the tick operates, focusing on the impact, with shield and with pawns.

tick{
checkforFreeinterceptbetween
{
in
check if intercepts shield
call checkIntercept
{
in
if within shield range:
if emp:
currenthitpoints (shield hitpoints) = 0
else:
currenthitpoints (shield hitpoints) -= projectile.damageamount
}
if it did not hit shield:
if it is on the map:
call checkforfreeintercept
{
in
if bullet is in path of pawn, this is not an accuracy thing it is a directional thing, again not pawns accuracy just checking if it intersects with said pawn
call impact
{
in
if hitthing != null than
dinfo (damageinfo) = (damageinfo) created by the projectile information
call takedamage with hitthing and send it dinfo \\hitthing.TakeDamage(dinfo)
{
in
if thing doesnt exist that this is attached too, break
else
if thing(pawn) has damagemultipliers damage amount = damage amount * damage multipliers
pass damageamount to call aply
call apply
{
in 
check if thing is pawn, if pawn:
call applytopawn
{
in
check if damage can be applied to multiple parts, like a grenade
if so
call applydamagetopart for multiple parts
else
call applydamagetopart for single part
{
in
num = damageamount
check to see if body part is real, if so break
call getpostarmordamage(num)return totaldamage
{
in
amount = num
for pawn apparel
void call applyarmor(amount, info)ref amount
{//this function applies the armor
//this basically checks a random value against the armorrating and penetration, if the randvalue is greater than armor penetration it goes through
in
armorLeft = armorating - armorpenatration min 0
randvalue
if (randvalue < armorleft / 2) than amount = 0
else if (randvalue < armorleft) than amount = randRange(0, amount / 2) 
}
void call applyamor(amount, info)ref amount //this one is done for pawn, so it checks the pawns skin, so the bio update can apply its skin modifiers
return amount
}
call finalizedaddinjury(fake totaldamageversion)
{
in
check to see if the part is alread dead, if so break
create hediff needed for real version
call finalizedaddinjury(real version)
{
in
num3 created and assigned to be a max value of the bodypart that is hit health, with it also checking to see if instant destruction is allowed, and if it is not allowed the maxinum value for num3 is set to parthealth - 1
assign totalDamageDealt num3
totalDamageDealt applies the damage trhoguh teh AddHediff func
}
}
}
}
}
}
}
}
}
}


launch assigns the quality modifier, but doesnt translate it to damage?


okay so shield damage does reach the impact function
okay I have found it, shieldbelt damage is applied in the function CompShield.PostPreApplyDamage(), great name
and outside of person shields that appears on the map, not the pawn are handled in checkIntercept

Im pretty the weapondamagemultiplier is the quality

okay the rangedweapondamagemultiplier stat is the quality, so what we need to do is some how make a thingcomp
that we can attach to our weapon that than is modified by this rangedweapondamagemultiplier that we pass through our
functions


okay compquality for weapons assignment: we will assign the shielddamage comps here too
PostProcesssGeneratedGear
DebugSpawn
maybe Makething




okay I found where comps are assigned, you can look in C:\Program Files (x86)\Steam\steamapps\common\RimWorld\Data\Royalty\Defs\ThingDefs_Misc\Weapons\MeleeUltratech.xml
to see that comps are assigned to thingdefs, which means that each weapon needs to be assigned this comp, but as shown in the file it can be done in the abstract

okay with this information here is the plan, we need to create our comp, which I think our CompDamageDef handles,
than we need to do a patch onto the base weapons that adds our comp to the comps list
in our comp we need an override for intiialize that will take our def.comps[i] somehow and grant it the proper values
than we need to pass this to our compshield.postpreapplydamage and our applyarmor functions,
and thats all
parent is part of thingcomp, and it is initialized befoore the initiialized function on thingcomp, so we can use that to identify what weapon
we are in, and than we can attach our thingcomp to the correct weapon, wonderful